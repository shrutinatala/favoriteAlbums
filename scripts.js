const WHATS_YOUR_PLEASURE_IMAGE = "Album Covers/what's your pleasure.jpg";
const IN_RAINBOWS_IMAGE = "Album Covers/in rainbows.webp";
const PURPLE_RAIN_IMAGE = "Album Covers/purple rain.jpeg";
const WHATS_THE_STORY_IMAGE = "Album Covers/whats the story morning glory.webp";
const ABBEY_ROAD_IMAGE = "Album Covers/abbey road.png";
const ALIVE_2007_IMAGE = "Album Covers/alive 2007.webp";
const BLONDE_IMAGE = "Album Covers/blonde.jpeg";
const CHANNEL_ORANGE_IMAGE = "Album Covers/channel orange.jpeg";
const FLOWER_BOY_IMAGE ="Album Covers/flowerboy.jpeg";
const FORREST_GUMP_IMAGE ="Album Covers/forrest gump - original motion picture score.jpeg";
const WHATS_GOING_ON_IMAGE ="Album Covers/what's going on.jpeg";
const RENAISSANCE_IMAGE ="Album Covers/renaissance.jpeg";
const FUTURE_NOSTALGIA_IMAGE ="Album Covers/future nostalgia.webp";
const PULP_FICTION_IMAGE="Album Covers/pulp fiction.jpeg";
const WHITE_ALBUM_IMAGE="Album Covers/white album.png";
const OFF_THE_WALL_IMAGE="Album Covers/off the wall.jpeg";
const SATURDAY_NIGHT_FEVER_IMAGE ="Album Covers/saturday night fever.jpeg";
const THRILLER_IMAGE="Album Covers/thriller.webp";
const KID_A_IMAGE="Album Covers/kid a.jpeg";
const IGOR_IMAGE="Album Covers/igor.jpeg";
const YEEZUS_IMAGE="Album Covers/yeezus.webp";
const THE_SLOW_RUSH_IMAGE = "Album Covers/the slow rush.jpg";
const EVENING_WITH_SILK_SONIC_IMAGE = "Album Covers/an evening with silk sonic.webp";
const CHRISTMAS_ALBUM_IMAGE = "Album Covers/christmas album.jpeg";
const GRADUATION_IMAGE = "Album Covers/graduation.jpeg";
const NFR_IMAGE = "Album Covers/nfr.png";
const SAWAYAMA_IMAGE = "Album Covers/sawayama.jpeg";
const DAWN_FM_IMAGE = "Album Covers/dawn fm.webp";
const RAM_IMAGE = "Album Covers/random access memories.webp";
const HARRY_POTTER_IMAGE = "Album Covers/harry potter and the sorcerer's stone.jpeg";
const CURRENTS_ALBUM_IMAGE = "Album Covers/currents.jpeg";
const DARK_SIDE_OF_THE_MOON_IMAGE = "Album Covers/the dark side of the moon.jpeg";
const MBDTF_IMAGE = "Album Covers/mbdtf.jpeg";
const DISCOVERY_IMAGE = "Album Covers/discovery.jpeg";
const OK_COMPUTER_IMAGE = "Album Covers/ok computer.jpeg";
const HOLD_THE_GIRL_IMAGE = "Album Covers/hold the girl.webp";
const PURE_HEROINE_IMAGE = "Album Covers/pure heroine.png";
const LATE_REGISTRATION_IMAGE = "Album Covers/late registration.jpeg";
const NOSTALGIA_ULTRA_IMAGE = "Album Covers/nostalgia, ultra.webp";



let titles = [
   {
       title: "In Rainbows",
       image: IN_RAINBOWS_IMAGE,
       yearMade: 2007,
       artist: "Radiohead",
       bestTrack: "15 Step",
       youtubeLink: "https://www.youtube.com/watch?v=9bahTUVLXZw"
   },
   {
       title: "Purple Rain",
       image: PURPLE_RAIN_IMAGE,
       yearMade: 1984,
       artist: "Prince",
       bestTrack: "When Doves Cry",
       youtubeLink: "https://www.youtube.com/watch?v=oTUSeac7IuQ"
   },
   {
       title: "What's Your Pleasure?",
       image: WHATS_YOUR_PLEASURE_IMAGE,
       yearMade: 2020,
       artist: "Jessie Ware",
       bestTrack: "Spotlight",
       youtubeLink: "https://www.youtube.com/watch?v=Rgy-eAzARNE"
   },
   {
       title: "(What's The Story) Morning Glory?",
       image: WHATS_THE_STORY_IMAGE,
       yearMade: 1995,
       artist: "Oasis",
       bestTrack: "Champagne Supernova",
       youtubeLink: "https://www.youtube.com/watch?v=MlZOFIRC9HA"
   },
   {
       title: "Abbey Road",
       image: ABBEY_ROAD_IMAGE,
       yearMade: 1969,
       artist: "The Beatles",
       bestTrack: "Golden Slumber to The End",
       youtubeLink: "https://www.youtube.com/watch?v=PjKtfvKJSuk"
   },
   {
       title: "Yeezus",
       image: YEEZUS_IMAGE,
       yearMade: 2013,
       artist: "Kanye West",
       bestTrack: "New Slaves",
       youtubeLink: "https://www.youtube.com/watch?v=vQ0u09mFodw"
   },
   {
       title: "Thriller",
       image: THRILLER_IMAGE,
       yearMade: 1982,
       artist: "Michael Jackson",
       bestTrack: "Thriller",
       youtubeLink: "https://www.youtube.com/watch?v=sO4vI8P88NM"
   },
   {
       title: "Alive 2007",
       image: ALIVE_2007_IMAGE,
       yearMade: 2007,
       artist: "Daft Punk",
       bestTrack: "Touch It/Technologic to Too Long/Steam Machine",
       youtubeLink: "https://www.youtube.com/watch?v=B38CY-4Rd6s&t=382s"
   },
   {
       title: "Pulp Fiction (Music From The Motion Picture)",
       image: PULP_FICTION_IMAGE,
       yearMade: 1994,
       artist: "Various Artists",
       bestTrack: "Bullwinkle, Pt. II",
       youtubeLink: "https://www.youtube.com/watch?v=l2aYcC5JedQ"
   },
   {
       title: "Blonde",
       image: BLONDE_IMAGE,
       yearMade: 2016,
       artist: "Frank Ocean",
       bestTrack: "Self Control",
       youtubeLink: "https://www.youtube.com/watch?v=BME88lS6aVY"
   },
   {
       title: "Channel Orange",
       image: CHANNEL_ORANGE_IMAGE,
       yearMade: 2012,
       artist: "Frank Ocean",
       bestTrack: "Pyramids",
       youtubeLink: "https://www.youtube.com/watch?v=dMV31MWIjLE"
   },
   {
       title: "IGOR",
       image: IGOR_IMAGE,
       yearMade: 2019,
       artist: "Tyler the Creator",
       bestTrack: "IGOR'S THEME",
       youtubeLink: "https://www.youtube.com/watch?v=6S20mJvr4vs"
   },
   {
       title: "Kid A",
       image: KID_A_IMAGE,
       yearMade: 2000,
       artist: "Radiohead",
       bestTrack: "Optimistic to Idioteque",
       youtubeLink: "https://www.youtube.com/watch?v=1On-ZHfTWOo&list=PL8oIBrKkUskoOl8xHRdFfosGdwYbkolRK"
   },
   {
       title: "Forrest Gump - Original Motion Picture Score",
       image: FORREST_GUMP_IMAGE,
       yearMade: 1994,
       artist: "Alan Silvestri",
       bestTrack: "Suite from Forrest Gump",
       youtubeLink: "https://www.youtube.com/watch?v=u77wp5cAPwY"
   },
   {
       title: "Future Nostalgia",
       image: FUTURE_NOSTALGIA_IMAGE,
       yearMade: 2020,
       artist: "Dua Lipa",
       bestTrack: "Don't Start Now",
       youtubeLink: "https://www.youtube.com/watch?v=oygrmJFKYZY"
   },
   {
       title: "What's Going On?",
       image: WHATS_GOING_ON_IMAGE,
       yearMade: 1971,
       artist: "Marvin Gaye",
       bestTrack: "Inner City Blues (Make Me Wanna Holler)",
       youtubeLink: "https://www.youtube.com/watch?v=57Ykv1D0qEE"
   },
   {
       title: "White Album",
       image: WHITE_ALBUM_IMAGE,
       yearMade: 1968,
       artist: "The Beatles",
       bestTrack: "I Will",
       youtubeLink: "https://www.youtube.com/watch?v=p-abNGP1BK4"
   },
   {
       title: "Off the Wall",
       image: OFF_THE_WALL_IMAGE,
       yearMade: 1979,
       artist: "Michael Jackson",
       bestTrack: "Rock with You - Single Version",
       youtubeLink: "https://www.youtube.com/watch?v=5X-Mrc2l1d0"
   },
   {
       title: "Saturday Night Fever (The Original Movie Soundtrack)",
       image: SATURDAY_NIGHT_FEVER_IMAGE,
       yearMade: 1977,
       artist: "Various Artists",
       bestTrack: "More Than A Woman",
       youtubeLink: "https://www.youtube.com/watch?v=uQ9_MwZIaoc"
   },
   {
       title: "RENAISSANCE",
       image: RENAISSANCE_IMAGE,
       yearMade: 2022,
       artist: "Beyonc√©",
       bestTrack: "VIRGO'S GROOVE",
       youtubeLink: "https://www.youtube.com/watch?v=aD3HgrfjrAw"
   },
   {
       title: "Flower Boy",
       image: FLOWER_BOY_IMAGE,
       yearMade: 2017,
       artist: "Tyler the Creator",
       bestTrack: "Boredom",
       youtubeLink: "https://www.youtube.com/watch?v=jxlBOBOZHqI"
   },
   {
        title: "The Slow Rush",
        image: THE_SLOW_RUSH_IMAGE,
        yearMade: 2020,
        artist: "Tame Imapala",
        bestTrack: "Borderline",
        youtubeLink: "https://www.youtube.com/watch?v=MXkZ-eeGs6A"
    },
    {
        title: "An Evening With Silk Sonic",
        image: EVENING_WITH_SILK_SONIC_IMAGE,
        yearMade: 2021,
        artist: "Silk Sonic (Bruno Mars and Anderson .Paak)",
        bestTrack: "Blast Off",
        youtubeLink: "https://www.youtube.com/watch?v=zJkr7T4KUIY"
    },
    {
        title: "Christmas Album",
        image: CHRISTMAS_ALBUM_IMAGE,
        yearMade: 1970,
        artist: "The Jackson 5",
        bestTrack: "Blast Off",
        youtubeLink: "https://www.youtube.com/watch?v=k8bPwW3qGu8"
    },
    {
        title: "Graduation",
        image: GRADUATION_IMAGE,
        yearMade: 2007,
        artist: "Kanye West",
        bestTrack: "Good Life",
        youtubeLink: "https://www.youtube.com/watch?v=FEKEjpTzB0Q"
    },
    {
        title: "Norman F*cking Rockwell!",
        image: NFR_IMAGE,
        yearMade: 2019,
        artist: "Lana Del Rey",
        bestTrack: "How to disappear",
        youtubeLink: "https://www.youtube.com/watch?v=WU_EGJOQ69o"
    },
    {
        title: "Dawn FM",
        image: DAWN_FM_IMAGE,
        yearMade: 2022,
        artist: "The Weeknd",
        bestTrack: "Take My Breath",
        youtubeLink: "https://www.youtube.com/watch?v=eT1E3gmST9U"
    },
    {
        title: "SAWAYAMA",
        image: SAWAYAMA_IMAGE,
        yearMade: 2020,
        artist: "Rina Sawayama",
        bestTrack: "XS",
        youtubeLink: "https://www.youtube.com/watch?v=SqBdfJcehis"
    },
    {
        title: "Random Access Memories",
        image: RAM_IMAGE,
        yearMade: 2013,
        artist: "Daft Punk",
        bestTrack: "Giorgio by Moroder",
        youtubeLink: "https://www.youtube.com/watch?v=zhl-Cs1-sG4"
    },
    {
        title: "Currents",
        image: CURRENTS_ALBUM_IMAGE,
        yearMade: 2015,
        artist: "Tame Impala",
        bestTrack: "The Less I Know The Better",
        youtubeLink: "https://www.youtube.com/watch?v=2SUwOgmvzK4"
    },
    {
        title: "Harry Potter and the Sorcerer's Stone Soundtrack",
        image: HARRY_POTTER_IMAGE,
        yearMade: 2001,
        artist: "John Williams",
        bestTrack: "Harry's Wondrous World",
        youtubeLink: "https://www.youtube.com/watch?v=yB-c85V8Zsg"
    },
    {
        title: "The Dark Side of the Moon",
        image: DARK_SIDE_OF_THE_MOON_IMAGE,
        yearMade: 1973,
        artist: "Pink Floyd",
        bestTrack: "Us and Them",
        youtubeLink: "https://www.youtube.com/watch?v=HoLhKJuGhK0"
    },
    {
        title: "My Beautiful Dark Twisted Fantasy",
        image: MBDTF_IMAGE,
        yearMade: 2010,
        artist: "Kanye West",
        bestTrack: "Lost in the World",
        youtubeLink: "https://www.youtube.com/watch?v=ofaRvNOV4SI"
    },
    {
        title: "Discovery",
        image: DISCOVERY_IMAGE,
        yearMade: 2001,
        artist: "Daft Punk",
        bestTrack: "Crescendolls",
        youtubeLink: "https://www.youtube.com/watch?v=oor2uIqys8M"
    },
    {
        title: "Ok Computer",
        image: OK_COMPUTER_IMAGE,
        yearMade: 1997,
        artist: "Radiohead",
        bestTrack: "Airbag",
        youtubeLink: "https://www.youtube.com/watch?v=jNY_wLukVW0"
    },
    {
        title: "Hold The Girl",
        image: HOLD_THE_GIRL_IMAGE,
        yearMade: 2022,
        artist: "Rina Sawayama",
        bestTrack: "Frankenstein",
        youtubeLink: "https://www.youtube.com/watch?v=vMARsssH1LY"
    },
    {
        title: "Pure Heroine",
        image: PURE_HEROINE_IMAGE,
        yearMade: 2013,
        artist: "Lorde",
        bestTrack: "Ribs",
        youtubeLink: "https://www.youtube.com/watch?v=b7pE8AG1jjE"
    },
    {
        title: "Late Registration",
        image: LATE_REGISTRATION_IMAGE,
        yearMade: 2005,
        artist: "Kanye West",
        bestTrack: "Touch The Sky",
        youtubeLink: "https://www.youtube.com/watch?v=B95OUKk7alM"
    },
    {
        title: "nostalgia, ULTRA (technically a mixtape)",
        image: NOSTALGIA_ULTRA_IMAGE,
        yearMade: 2011,
        artist: "Frank Ocean",
        bestTrack: "Novacane",
        youtubeLink: "https://www.youtube.com/watch?v=hgOu8eRJZ3Q"
    }

];


function showCards() {
    const cardContainer = document.getElementById("card-container");
    cardContainer.innerHTML = "";
    const templateCard = document.querySelector(".card");

    titles.forEach(showCard => {
        const nextCard = templateCard.cloneNode(true);
        editCardContent(nextCard, showCard.title, showCard.image, showCard.yearMade, showCard.artist, showCard.bestTrack, showCard.youtubeLink);
        cardContainer.appendChild(nextCard);
    });
}


function editCardContent(card, newTitle, newImage, yearMade, artist, bestTrack, youtubeLink) {
    card.style.display = "block";

    const cardImage = card.querySelector(".front img");
    cardImage.src = newImage;
    cardImage.alt = newTitle + " Album";

    const titleElement = card.querySelector(".back h2");
    titleElement.textContent = newTitle;

    const yearElement = card.querySelector(".year-made");
    yearElement.textContent = "Year: " + yearMade;

    const artistElement = card.querySelector(".artist");
    artistElement.textContent = "Artist: " + artist;

    const bestTrackElement = card.querySelector(".best-track");
    bestTrackElement.textContent = bestTrack;

    const cardLink = card.querySelector(".card-link");
    cardLink.href = youtubeLink;
}


let azAscendingOrder = true;
let artistAscendingOrder = true;


function reorderCardsByTitle() {
   titles.sort((a, b) => {
       return azAscendingOrder ? a.title.localeCompare(b.title) : b.title.localeCompare(a.title);
   });
   showCards();

   const azButton = document.getElementById("azButton");
   azButton.textContent = azAscendingOrder ? "Sort Titles Z-A" : "Sort Titles A-Z";

   azAscendingOrder = !azAscendingOrder;
}


function reorderCardsByArtist() {
   titles.sort((a, b) => {
       const removeThe = (artist) => {
           return artist.toLowerCase().startsWith("the ") ? artist.slice(4) : artist;
       };
       const artistA = removeThe(a.artist);
       const artistB = removeThe(b.artist);
       return artistAscendingOrder ? artistA.localeCompare(artistB) : artistB.localeCompare(artistA);
   });
   showCards();

   const artistButton = document.getElementById("artistButton");
   artistButton.textContent = artistAscendingOrder ? "Sort Artists Z-A" : "Sort Artists A-Z";

   artistAscendingOrder = !artistAscendingOrder;
}


let ascendingOrder = true;
function reorderCardsByYear() {
   titles.sort((a, b) => {
       return ascendingOrder ? a.yearMade - b.yearMade : b.yearMade - a.yearMade;
   });
   showCards();
}


function toggleOrder() {
   ascendingOrder = !ascendingOrder;
   const button = document.getElementById("toggleButton");
   button.textContent = ascendingOrder ? "Sort Newest to Oldest" : "Sort Oldest to Newest";
   reorderCardsByYear();
}


let originalOrder = [...titles];
let originalAzButtonText;
let originalArtistButtonText;
let originalToggleButtonText;


function resetOrder() {
   titles = [...originalOrder];
   azAscendingOrder = true;
   artistAscendingOrder = true;
   ascendingOrder = true;
   showCards();

   const azButton = document.getElementById("azButton");
   azButton.textContent = originalAzButtonText;


   const artistButton = document.getElementById("artistButton");
   artistButton.textContent = originalArtistButtonText;


   const toggleButton = document.getElementById("toggleButton");
   toggleButton.textContent = originalToggleButtonText;


   document.getElementById("searchInput").value = "";
}


document.addEventListener("DOMContentLoaded", () => {
   originalAzButtonText = document.getElementById("azButton").textContent;
   originalArtistButtonText = document.getElementById("artistButton").textContent;
   originalToggleButtonText = document.getElementById("toggleButton").textContent;
});


function search() {
    const searchText = document.getElementById("searchInput").value.toLowerCase();
    const searchResults = titles.filter(title => {
        return (
            title.title.toLowerCase().includes(searchText) ||
            title.artist.toLowerCase().includes(searchText) ||
            title.yearMade.toString().includes(searchText) ||
            title.bestTrack.toLowerCase().includes(searchText)
        );
    });
    displaySearchResults(searchResults);
}


function displaySearchResults(results) {
   const cardContainer = document.getElementById("card-container");
   cardContainer.innerHTML = "";

   if (results.length === 0) {
       cardContainer.innerHTML = "<h4>No results found.</h4>";
   } else {
       searchResults(results);
   }
}


function searchResults(titlesArray = titles) {
   const cardContainer = document.getElementById("card-container");
   cardContainer.innerHTML = "";
   const templateCard = document.querySelector(".card");
  
   titlesArray.forEach(showCard => {
        const nextCard = templateCard.cloneNode(true);
        editCardContent(nextCard, showCard.title, showCard.image, showCard.yearMade, showCard.artist, showCard.bestTrack, showCard.youtubeLink);
        cardContainer.appendChild(nextCard);
   });
}


document.addEventListener("DOMContentLoaded", showCards);


let loggedIn = false;


function login() {
   const password = document.getElementById("passwordInput").value;
   if (password === "snap") {
       loggedIn = true;
       document.getElementById("loginButton").textContent = "Logout";
       document.getElementById("passwordInput").style.display = "none";
       document.getElementById("addTitleForm").style.display = "block";


       document.getElementById("passwordInput").value = "";
   } else {
       alert("Incorrect password. Please try again.");
   }
}


function logout() {
   loggedIn = false;
   document.getElementById("loginButton").textContent = "Login";
   document.getElementById("passwordInput").style.display = "inline-block";
   document.getElementById("addTitleForm").style.display = "none";
   alert("Logged out successfully!");
}


function addNewTitle() {
   if (!loggedIn) {
       alert("Please log in to add a new title.");
       return;
   }

   const title = document.getElementById("titleInput").value;
   const artist = document.getElementById("artistInput").value;
   const yearMade = parseInt(document.getElementById("yearInput").value);
   const bestTrack = document.getElementById("trackInput").value;
   const youtubeLink = document.getElementById("youtubeLinkInput").value;
   const imageFile = document.getElementById("imageInput").files[0];
   
   if (!title || !artist || isNaN(yearMade) || !bestTrack || !youtubeLink || !imageFile) {
        alert("Please fill out all of the fields!");
        return;
    }

   const newTitle = {
       title: title,
       artist: artist,
       yearMade: yearMade,
       bestTrack: bestTrack,
       youtubeLink: youtubeLink,
       image: URL.createObjectURL(imageFile)
   };
   titles.unshift(newTitle);
   alert("New title added successfully!");
   showCards();
   saveTitlesToLocalStorage();
   clearFormFields();
}


function clearFormFields() {
   document.getElementById("titleInput").value = "";
   document.getElementById("artistInput").value = "";
   document.getElementById("yearInput").value = "";
   document.getElementById("imageInput").value = "";
   document.getElementById("previewImage").style.display = "none";
}


function toggleDropdown() {
   document.getElementById("myDropdown").classList.toggle("show");
}


function sortByDecade(startYear, endYear) {
   const decadeTitles = titles.filter(title => {
       return title.yearMade >= startYear && title.yearMade <= endYear;
   });
   displaySearchResults(decadeTitles);
}


document.addEventListener("DOMContentLoaded", () => {
   originalAzButtonText = document.getElementById("azButton").textContent;
   originalArtistButtonText = document.getElementById("artistButton").textContent;
   originalToggleButtonText = document.getElementById("toggleButton").textContent;


   const titleElement = document.querySelector(".title");
   titleElement.addEventListener("click", resetOrderOnClick);
});


function resetOrderOnClick() {
   resetOrder();
}
